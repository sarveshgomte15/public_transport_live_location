<!DOCTYPE html>
<html>
<head>
  <title>Driver App</title>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body>
  <h2>Driver App - Update Location</h2>

  <form id="driverForm">
    <input type="text" id="driverId" placeholder="Driver ID" required><br>
    <input type="text" id="busNo" placeholder="Bus No" required><br>
    <input type="text" id="name" placeholder="Driver Name" required><br>
    <input type="text" id="from" placeholder="From" required><br>
    <input type="text" id="to" placeholder="To" required><br>
    <label>
      Full:
      <input type="checkbox" id="full">
    </label><br><br>
    <button type="submit">Start Sharing Location</button>
  </form>

  <script>
    const SERVER_URL = "https://your-render-url.onrender.com"; // replace with Render URL
    let watchId;

    document.getElementById("driverForm").addEventListener("submit", function(e) {
      e.preventDefault();

      const driverId = document.getElementById("driverId").value;
      const busNo = document.getElementById("busNo").value;
      const name = document.getElementById("name").value;
      const from = document.getElementById("from").value;
      const to = document.getElementById("to").value;

      if (navigator.geolocation) {
        watchId = navigator.geolocation.watchPosition(function(position) {
          axios.post(`${SERVER_URL}/update_location`, {
            driverId: driverId,
            busNo: busNo,
            name: name,
            from: from,
            to: to,
            lat: position.coords.latitude,
            lng: position.coords.longitude,
            full: document.getElementById("full").checked
          }).then(res => {
            console.log("Location updated", res.data);
          }).catch(err => {
            console.error("Error:", err);
          });
        });
      } else {
        alert("Geolocation not supported!");
      }
    });
  </script>
</body>
</html>
